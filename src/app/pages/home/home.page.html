<!-- <ion-header class="ion-no-border">
  <ion-toolbar mode="md" color="light">
    <ion-buttons slot="start">
      <ion-avatar slot="start" class="toolbar-image">
        <img src="assets/images/avatar/2.jpg" />
      </ion-avatar>
    </ion-buttons>
    <ion-title>
      <ion-label class="home-title">Ol√°, {{ user?.name}}</ion-label>
      <ion-label class="home-sub-title">Como voc√™ est√° hoje?</ion-label>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button color="dark">
        <ion-icon slot="icon-only" src="assets/icon/bell.svg"></ion-icon>
      </ion-button>
      <ion-button color="dark" (click)="onSearch()">
        <ion-icon slot="icon-only" src="assets/icon/search.svg"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar mode="md" color="light">
    <ion-title>
      <ion-label class="home-toolbar-lbl">Find Your Desired <span class="active">Doctor Right Now.!</span> </ion-label>
    </ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-header class="ion-no-border">
  <ion-toolbar mode="md">
    <ion-buttons slot="start">
      <ion-menu-button color="primary"></ion-menu-button>
    </ion-buttons>

    <ion-title>
      <div class="header-title">
        <!-- <ion-icon name="business" color="primary"></ion-icon> -->
        <ion-item><img src="assets/images/images/logo_mk_75x75.png" width="40"></ion-item>
        <span>Member of Kingdom</span>
      </div>
    </ion-title>

    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="openNotifications()">
        <ion-icon name="notifications" color="medium"></ion-icon>
        <ion-badge *ngIf="notificationCount > 0" color="danger" class="notification-badge">
          {{ notificationCount }}
        </ion-badge>
      </ion-button>

      <ion-button fill="clear" (click)="openProfile()">
        <ion-avatar class="user-avatar">
          <img [src]="'assets/images/5.png'" [alt]="user?.name">
        </ion-avatar>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content>
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h2>Ol√°, {{ user?.name || 'Usu√°rio' }}! üëã</h2>
      <p>{{ getWelcomeMessage() }}</p>
    </div>
    <div class="church-info">
      <ion-chip color="primary" outline>
        <ion-icon name="location" color="primary"></ion-icon>
        <ion-label>{{ churchInfo?.name || 'Minha Igreja' }}</ion-label>
      </ion-chip>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="stats-container">
    <h3 class="section-title">
      <ion-icon name="analytics" color="primary"></ion-icon>
      Vis√£o Geral
    </h3>

    <div class="stats-grid">
      <!-- Total Members -->
      <ion-card class="stat-card members-card" (click)="navigateTo('/members')">
        <ion-card-content>
          <div class="stat-icon">
            <ion-icon name="people" color="primary"></ion-icon>
          </div>
          <div class="stat-info">
            <h4>{{ stats?.totalMembers || 0 }}</h4>
            <p>Total de Membros</p>
            <div class="stat-change positive" *ngIf="getMemberGrowth() > 0">
              <ion-icon name="trending-up"></ion-icon>
              <span>+{{ stats?.memberGrowth }}% este m√™s</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Active Members -->
      <ion-card class="stat-card active-card" (click)="navigateTo('/members', { filter: 'active' })">
        <ion-card-content>
          <div class="stat-icon">
            <ion-icon name="heart" color="secondary"></ion-icon>
          </div>
          <div class="stat-info">
            <h4>{{ stats?.activeMembers || 0 }}</h4>
            <p>Membros Ativos</p>
            <div class="stat-percentage">
              <span>{{ getActivePercentage() }}% do total</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Upcoming Events -->
      <ion-card class="stat-card events-card" (click)="navigateTo('/events')">
        <ion-card-content>
          <div class="stat-icon">
            <ion-icon name="calendar" color="tertiary"></ion-icon>
          </div>
          <div class="stat-info">
            <h4>{{ stats?.upcomingEvents || 0 }}</h4>
            <p>Pr√≥ximos Eventos</p>
            <div class="stat-detail">
              <span>Esta semana</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- New Visitors -->
      <ion-card class="stat-card visitors-card" (click)="navigateTo('/visitors')">
        <ion-card-content>
          <div class="stat-icon">
            <ion-icon name="person-add" color="success"></ion-icon>
          </div>
          <div class="stat-info">
            <h4>{{ stats?.newVisitors || 0 }}</h4>
            <p>Novos Visitantes</p>
            <div class="stat-detail">
              <span>Este m√™s</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="actions-container">
    <h3 class="section-title">
      <ion-icon name="flash" color="primary"></ion-icon>
      A√ß√µes R√°pidas
    </h3>

    <div class="actions-grid">
      <ion-button expand="block" fill="outline" class="action-button" (click)="navigateTo('/members/new')">
        <ion-icon name="person-add" slot="start"></ion-icon>
        Novo Membro
      </ion-button>

      <ion-button expand="block" fill="outline" class="action-button" (click)="navigateTo('/events/new')">
        <ion-icon name="calendar-clear" slot="start"></ion-icon>
        Criar Evento
      </ion-button>

      <ion-button expand="block" fill="outline" class="action-button" (click)="sendBulkMessage()">
        <ion-icon name="chatbubbles" slot="start"></ion-icon>
        Enviar Aviso
      </ion-button>

      <ion-button expand="block" fill="outline" class="action-button" (click)="navigateTo('/reports')">
        <ion-icon name="document-text" slot="start"></ion-icon>
        Relat√≥rios
      </ion-button>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="activity-container">
    <h3 class="section-title">
      <ion-icon name="time" color="primary"></ion-icon>
      Atividades Recentes
    </h3>

    <ion-card class="activity-card">
      <ion-card-content>
        <div class="activity-list">

          <div class="activity-item" *ngFor="let activity of recentActivities; trackBy: trackActivity">
            <div class="activity-avatar">
              <ion-avatar [class]="'activity-' + activity.type">
                <ion-icon [name]="getActivityIcon(activity.type)"></ion-icon>
              </ion-avatar>
            </div>

            <div class="activity-content">
              <p class="activity-text">{{ activity.description }}</p>
              <span class="activity-time">{{ formatActivityTime(activity.timestamp) }}</span>
            </div>

            <div class="activity-actions" *ngIf="activity.actionable">
              <ion-button size="small" fill="clear" color="primary" (click)="handleActivity(activity)">
                <ion-icon name="chevron-forward" slot="icon-only"></ion-icon>
              </ion-button>
            </div>
          </div>

          <!-- Empty State -->
          <div class="empty-activity" *ngIf="!recentActivities?.length">
            <ion-icon name="hourglass-outline" color="medium"></ion-icon>
            <p>Nenhuma atividade recente</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Upcoming Events Preview -->
  <div class="events-preview-container" *ngIf="upcomingEvents?.length">
    <h3 class="section-title">
      <ion-icon name="calendar-outline" color="primary"></ion-icon>
      Pr√≥ximos Eventos
    </h3>

    <ion-card class="events-card">
      <ion-card-content>
        <div class="event-item" *ngFor="let event of upcomingEvents; trackBy: trackEvent">
          <div class="event-date">
            <span class="event-day">{{ getEventDay(event.date) }}</span>
            <span class="event-month">{{ getEventMonth(event.date) }}</span>
          </div>

          <div class="event-info">
            <h4>{{ event.title }}</h4>
            <p>
              <ion-icon name="time-outline" color="medium"></ion-icon>
              {{ formatEventTime(event.startTime) }}
            </p>
            <p>
              <ion-icon name="location-outline" color="medium"></ion-icon>
              {{ event.location || 'Local a definir' }}
            </p>
          </div>

          <div class="event-actions">
            <ion-chip [color]="getEventTypeColor(event.type)" outline>
              {{ event.type }}
            </ion-chip>
            <ion-button size="small" fill="clear" (click)="viewEvent(event)">
              <ion-icon name="eye" slot="icon-only"></ion-icon>
            </ion-button>
          </div>
        </div>

        <ion-button expand="block" fill="clear" size="small" class="view-all-button" (click)="navigateTo('/events')">
          Ver Todos os Eventos
          <ion-icon name="arrow-forward" slot="end"></ion-icon>
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Bottom Spacing -->
  <div class="bottom-spacing"></div>
</ion-content>

<!-- Floating Action Button -->
<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button color="primary" (click)="openQuickActions()">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>

  <ion-fab-list side="top">
    <ion-fab-button color="secondary" (click)="navigateTo('/members/new')">
      <ion-icon name="person-add"></ion-icon>
    </ion-fab-button>
    <ion-fab-button color="tertiary" (click)="navigateTo('/events/new')">
      <ion-icon name="calendar-clear"></ion-icon>
    </ion-fab-button>
    <ion-fab-button color="success" (click)="sendBulkMessage()">
      <ion-icon name="chatbubbles"></ion-icon>
    </ion-fab-button>
  </ion-fab-list>
</ion-fab>

<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="isLoading">
  <ion-spinner name="crescent" color="primary"></ion-spinner>
  <p>Carregando dados...</p>
</div>

<!-- Refresh Button for Pull-to-Refresh -->
<ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
  <ion-refresher-content pullingIcon="chevron-down-circle-outline" pullingText="Puxe para atualizar"
    refreshingSpinner="crescent" refreshingText="Atualizando...">
  </ion-refresher-content>
</ion-refresher>
<!-- <ion-content class="ion-padding">
  <div class="home-screen">
    <div class="main-title">
      <ion-label class="title">Upcoming Schedule</ion-label>
      <ion-label class="sub-title">See All</ion-label>
    </div>

    <swiper-container #swiper slides-per-view="1" space-between="10">
      <swiper-slide *ngFor="let item of util.homeSlider;">
        <div class="home-slider-cover" [ngStyle]="{'background-image': 'url('+item.image+')'}">
          <ion-label class="name"> {{item.name}} </ion-label>
          <ion-label class="city"> {{item.type}} </ion-label>
          <ion-label class="date"> {{item.date}} </ion-label>
        </div>
      </swiper-slide>
    </swiper-container>

    <div class="main-title">
      <ion-label class="title">Categories</ion-label>
      <ion-label class="sub-title" (click)="onCategories()">See All</ion-label>
    </div>

    <swiper-container #swiper slides-per-view="4" space-between="10">
      <swiper-slide *ngFor="let item of util.diseasesList;">
        <div class="ion-activatable ripple-parent categories-info" (click)="onDoctorList()">
          <ion-ripple-effect></ion-ripple-effect>
          <img [src]="item.image" alt="" class="img">
          <ion-label class="name">
            {{ (item.name.length>10)? (item.name | slice:0:10)+'..':(item.name)}}
          </ion-label>
        </div>
      </swiper-slide>
    </swiper-container>

    <div class="main-title">
      <ion-label class="title">Usu√°rios</ion-label>
      <ion-label class="sub-title">Todos </ion-label>
    </div>

    <div class="doc-list">
      <ion-row class="ion-activatable ripple-parent docs-items" *ngFor="let item of util.doctorsList;let i = index;"
        (click)="onDoctorInfo(item.name)">
        <ion-ripple-effect></ion-ripple-effect>
        <ion-col size="3">
          <div class="doc-cover" [ngStyle]="{'background-image': 'url('+item.image+')'}"></div>
        </ion-col>
        <ion-col size="9">
          <ion-label class="name"> {{item.name}} </ion-label>
          <ion-label class="type"> {{item.cate_name}} </ion-label>
          <div class="rates">
            <ion-icon slot="icon-only" name="star" color="warning"></ion-icon>
            <ion-icon slot="icon-only" name="star" color="warning"></ion-icon>
            <ion-icon slot="icon-only" name="star" color="warning"></ion-icon>
            <ion-icon slot="icon-only" name="star" color="warning"></ion-icon>
            <ion-icon slot="icon-only" name="star-outline" color="dark"></ion-icon>
            <ion-label class="lbl">(52{{i+1}})</ion-label>
          </div>
        </ion-col>
      </ion-row>
    </div>
  </div>
</ion-content> -->
